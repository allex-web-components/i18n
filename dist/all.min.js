!function(e,n,t){"use strict";var a=e.lib,i=e.execSuite.libRegistry.get("allex_applib"),l=i.BasicProcessor,o=i.BasicElement,g=i.getElementType("WebElement"),s=i.misc;function r(e){e.localize()}function u(e,t){o.call(this,e,t),this.language=null,this.available_langs=null,n.i18next.on("initialized",this._onI18Inintialized.bind(this)),n.i18next.language&&this.set("language",n.i18next.language)}function c(){l.call(this)}a.inherit(u,o),u.prototype.__cleanUp=function(){this.language=null,this.available_langs=null,o.prototype.__cleanUp.call(this)},u.prototype._onI18Inintialized=function(){this.set("language",i18next.language)},u.prototype.set_language=function(e){this.language=e,n.i18next.changeLanguage(e,this._onLanguageChanged.bind(this))},u.prototype._onLanguageChanged=function(){$("body").localize(),a.isFunction(this.getConfigVal("onLanguageChanged"))&&this.getConfigVal("onLanguageChanged")(this.language)},i.registerElementType("i18n",u),a.inherit(c,l),c.prototype.destroy=function(){l.prototype.destroy.call(this)},c.prototype.process=function(e){var n=s.getElementsArr(e),a=this.config;a&&n.push({name:a.element_name||"language",type:"i18n",options:{onLanguageChanged:a.onLanguageChanged}});var i=ALLEX.lib.extend({defaultLanguageCode:"en",fallbackLng:"en",debug:!1,load:"all"},t.i18n);if(!i.translations)throw new Error("Unable to load translation data, CONFIG.translation data");i18next.init({lng:i.defaultLanguageCode,resources:i.translations}),jqueryI18next.init(i18next,$,{tName:"t",i18nName:"i18n",handleName:"localize",selectorAttr:"data-i18n",targetAttr:"i18n-target",optionsAttr:"i18n-options",useOptionsAttr:!1,parseDefaultValueFromContent:!0}),i18next.init({debug:!0,lng:i.defaultLanguageCode}),g.jqueryDecorators.push(r)},i.registerPreprocessor("i18PreProcessor",c)}(ALLEX,window,ALLEX_CONFIGURATION);